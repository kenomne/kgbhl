import sqlite3 from 'sqlite3';import fs from 'fs';import path from 'path';import { fileURLToPath } from 'url';import dotenv from 'dotenv';dotenv.config();const __filename=fileURLToPath(import.meta.url);const __dirname=path.dirname(__filename);const dbFile=process.env.SQLITE_FILE||path.join(__dirname,'..','..','data','app.db');const schemaPath=path.join(__dirname,'..','..','schema.sql');fs.mkdirSync(path.dirname(dbFile),{recursive:true});const db=new sqlite3.Database(dbFile);export function initDb(){const schema=fs.readFileSync(schemaPath,'utf-8');db.exec(schema,(err)=>{if(err){console.error('Failed to initialize database:',err);process.exit(1);}else{console.log('Database initialized');}});}export default db;